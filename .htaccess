# Enable URL rewriting
RewriteEngine On

# Set the rewrite base
RewriteBase /people_counter/

# Allow direct access to specific file types
RewriteCond %{REQUEST_FILENAME} -f [OR]
RewriteCond %{REQUEST_FILENAME} -d
RewriteRule ^ - [L]

# Serve README.md files as text
<Files "README.md">
    Header set Content-Type "text/plain; charset=UTF-8"
</Files>

# Enable CORS for API requests
<IfModule mod_headers.c>
    # Set CORS headers for API routes
    <FilesMatch "^(api|backend/api)">
        Header set Access-Control-Allow-Origin "*"
        Header set Access-Control-Allow-Methods "GET, POST, OPTIONS, DELETE"
        Header set Access-Control-Allow-Headers "Content-Type, X-API-Key"
    </FilesMatch>
</IfModule>

# Route counter reset endpoint
RewriteRule ^api/v1/counter/reset$ backend/api/v1/index.php [L]

# Set PHP settings
<IfModule mod_php7.c>
    php_flag display_errors On
    php_value error_reporting E_ALL
</IfModule> 